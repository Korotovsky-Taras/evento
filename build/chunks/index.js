var o=Object.defineProperty;var d=(a,e,t)=>e in a?o(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var r=(a,e,t)=>(d(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();class c{constructor(e){r(this,"PANEL_INIT_STYLE","init");r(this,"ROOT_EXPANDED_STYLE","sidebar-expanded");r(this,"PANEL_EXPANDED_STYLE","expanded");if(!e.buttonElement||!e.sidebarElement)throw new Error("SliderPanel: should provide buttonElement, sidebarElement");this.button=e.buttonElement,this.panel=e.sidebarElement,this.disableScroll=e.disableScroll||!1,this.init()}isReadyToUse(){return this.button instanceof HTMLElement&&this.panel instanceof HTMLElement}isMobile(){return"matchMedia"in window&&matchMedia("(max-width: 1024px)").matches}init(){if(!this.isReadyToUse())throw new Error("SliderPanel: elements to init not found");setTimeout(()=>{this.panel.classList.add(this.PANEL_INIT_STYLE)},0),this.button.addEventListener("click",()=>this.toggleExpand()),document.addEventListener("click",t=>{!this.panel.contains(t.target)&&!this.button.contains(t.target)&&this.panel.classList.contains(this.PANEL_EXPANDED_STYLE)&&this.toggleExpand()});let e;window.addEventListener("resize",t=>{clearTimeout(e),e=setTimeout(()=>{this.isMobile()||this.expand(!1)},50)})}toggleExpand(){const e=!this.panel.classList.contains(this.PANEL_EXPANDED_STYLE);this.expand(e)}expand(e){this.panel.classList.toggle(this.PANEL_EXPANDED_STYLE,e),this.button.classList.toggle("active",e),document.documentElement.classList.toggle(this.ROOT_EXPANDED_STYLE,e)}}function p(){new c({sidebarElement:document.querySelector(".js-sidebar-element"),buttonElement:document.querySelector(".js-sidebar-btn-element")})}document.addEventListener("DOMContentLoaded",p);class h{constructor(e){r(this,"MAX_FILES_LENGTH",4);r(this,"PANEL_INIT_STYLE","init");r(this,"ATTACH_ITEM_STYLE","attach-item");r(this,"ATTACH_ITEM_DELETE_ICON_STYLE","attach-item__delete-icon");if(!e.droppableElementSelector||!e.uploadButtonSelector||!e.attachmentsSelector)throw new Error("DropPanel: should provide droppableElementSelector, uploadButtonSelector, attachmentsSelector");this.droppable=document.querySelector(e.droppableElementSelector),this.attachments=this.droppable.querySelector(e.attachmentsSelector),this.uploader=this.droppable.querySelector(e.uploadButtonSelector),this.files=new Map,this.init()}isReadyToUse(){return this.droppable instanceof HTMLElement&&this.attachments instanceof HTMLElement&&this.uploader instanceof HTMLInputElement}dropHandler(e){e.preventDefault(),e.target.files?[...e.target.files].forEach((t,s)=>{this.addFile(t)}):e.dataTransfer.items?[...e.dataTransfer.items].forEach((t,s)=>{t.kind==="file"&&this.addFile(t.getAsFile())}):[...e.dataTransfer.files].forEach((t,s)=>{this.addFile(t)})}createAttachment(e){const t=document.createElement("div"),s=document.createElement("span"),i=document.createElement("span");t.classList.add(this.ATTACH_ITEM_STYLE),i.classList.add(this.ATTACH_ITEM_DELETE_ICON_STYLE),t.appendChild(s),t.appendChild(i),s.innerText=e.name,this.attachments.appendChild(t),i.addEventListener("click",()=>{this.deleteFile(e),t.parentElement.removeChild(t)})}addFile(e){const t=this.isValid(e);t.valid?(this.files.set(e.name,e),this.createAttachment(e),console.log(e.name,e,this.files)):console.error(t.reason)}deleteFile(e){this.files.delete(e.name)}isValid(e){const t=this.isValidFileType(e),s=this.isValidFileSize(e),i=this.isValidMaxLength();return{valid:t.valid&&s.valid&&i.valid,reason:!t.valid&&t.reason||!s.valid&&s.reason||!i.valid&&i.reason}}isValidFileType(e){return{valid:["image/jpeg","image/jpg","image/png","application/pdf","application/msword"].includes(e.type),reason:`File type "${e.type}" is not allowed`}}isValidFileSize(e){return{valid:e.size<=5242880,reason:"File size should be less then 5mb"}}isValidMaxLength(){return{valid:this.files.size<this.MAX_FILES_LENGTH,reason:"Max files length 4"}}init(){if(!this.isReadyToUse())throw new Error("SliderPanel: elements to init not found");Object.assign(this.droppable,{getFiles:()=>this.files}),this.droppable.setAttribute("droppable",!0),this.droppable.addEventListener("dragenter",e=>{e.stopPropagation(),this.droppable.classList.add("dragover")}),this.droppable.addEventListener("dragleave",e=>{e.stopPropagation(),this.droppable.classList.remove("dragover")}),this.droppable.addEventListener("drop",e=>this.dropHandler(e)),this.uploader.addEventListener("change",e=>this.dropHandler(e))}}function u(){new h({droppableElementSelector:".js-droppable-element",attachmentsSelector:".js-drop-attachments-element",uploadButtonSelector:".js-uploader-element"})}document.addEventListener("DOMContentLoaded",u);
